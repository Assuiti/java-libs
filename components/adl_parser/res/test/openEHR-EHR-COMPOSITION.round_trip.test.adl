archetype
	openEHR-EHR-COMPOSITION.round_trip.test

concept
	[at0000]

description
	details = <
		["en"] = <
			language = <"en">
			purpose = <"parser round_trip for composition">
			keywords = <"test composition">
			copyright = <"copyright (c) 2004 ACODE HB">
		>
	>
	lifecycle_state = <"draft">
	original_author = <
		["name"] = <"Rong Chen">
		["organisation"] = <"ACODE HB">
		["date"] = <"2004-10-05">
	>

definition
    COMPOSITION[at0000] matches {
        content existence matches {0..1} cardinality matches {1..4; ordered; unique} matches {
            SECTION[at0001] matches { -- observation section
                items cardinality matches {*; ordered} matches {
                    OBSERVATION[at1000] matches {
                        data matches {
                            SINGLE_EVENT[at1001] matches {
                                origin matches {yyyy-mm-dd hh:mm:ss}
                                item matches {
                                    ITEM_SINGLE[at1002] matches {
                                        representation matches {
                                            ELEMENT[at1003]  matches {
                                                value matches {/this|that|something else/}
                                            }
                                            ELEMENT[at1004] matches {	-- c_quantity     
							                    value matches {
													C_QUANTITY <
														property = [openehr::128]
														list = <									
															["1"] = <
																units = <"yr">
																magnitude = <|0.0..200.0|>
															>
															["2"] = <
																units = <"mth">
																magnitude = <|1.0..36.0|>
															>									
														>
													>
												}
						                    }	
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
            SECTION[at0002] matches { -- instruction section
                items cardinality matches {*; ordered} matches {
                    INSTRUCTION[at2000] matches {
                        state matches {
                            DV_STATE matches {
                                value matches {
                                    [local::
                                    at2001.0, 	-- initial
                                    at2001.1, 	-- wait
                                    at2001.2] 	-- completed
                                }
                            }
                        }
                        action matches {
                            ITEM_LIST[at2002] matches {
                                representation matches {
                                    Cluster[at2003] matches {
                                        items cardinality matches {*; ordered} matches {
                                            ELEMENT[at2004] matches {	-- Name of medication
                                                value matches  {/.*/}
                                            }
                                            ELEMENT[at2006] matches {	-- Form
                                                value matches {
                                                    1|[local::at2006.0], 	-- capsule
                                                    2|[local::at2006.1], 	-- powder
                                                    3|[local::at2006.2],  	-- tablet
                                                    4|[local::at2006.3],  	-- solution
                                                    5|[local::at2006.4]  	-- suspension
                                                }
                                            }                                            
                                        }
									}
                                }
                            }
                        }
                    }
                }
            }
            SECTION[at0003] matches { -- evaluation section
                items cardinality matches {*; ordered} matches {
                    EVALUATION[at3000] matches {
                        data matches {
                            ITEM_TABLE[at3001] matches {
                                representation matches {
                                    CLUSTER[at3002]  matches {
                                        items cardinality matches {*; ordered} matches {
                                            CLUSTER[at3100] matches {	-- aspect
                                                items cardinality matches {*; ordered} matches {
                                                    ELEMENT[at3101] matches {  -- acuity unaided
                                                        value matches {
                                                            [local::at3101.0]
                                                        }
                                                    }
                                                    ELEMENT[at3102] matches { 	-- acuity w/glasses
                                                        value matches {
                                                            [local::at3102.0]
                                                        }
                                                    }
                                                    ELEMENT[at3103] matches { 	-- color
                                                        value matches {
                                                            [local::at3103.0]
                                                        }
                                                    }
                                                }
                                            }
                                            CLUSTER[at3200] matches {	-- left eye
                                                items cardinality matches {*; ordered} matches {
                                                    ELEMENT[at3203] matches {  -- color
                                                        value matches {
                                                            1|[local::at3203.0], 	-- normal
                                                            2|[local::at3203.1], 	-- weak
                                                            3|[local::at3203.2],  	-- very weak
                                                            4|[local::at3203.3]  	-- no color
                                                        }
                                                    }
                                                }
                                            }
                                            CLUSTER[at3300] matches {  -- right eye
                                                items cardinality matches {*; ordered} matches {
                                                    ELEMENT[at3303] matches {  -- color
                                                        value matches {
                                                            1|[local::at3303.0], 	-- normal
                                                            2|[local::at3303.1], 	-- weak
                                                            3|[local::at3303.2],  	-- very weak
                                                            4|[local::at3303.3]  	-- no color
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }

ontology
	primary_language = <"en">
	languages_available = <"en", ...>
	term_definitions = <
		["en"] = <
			items = <
				["at0000"] = <
					text = <"test composition">
					description = <"this is a test composition">
				>
		        ["at0001"] = <
					text = <"observation section">
					description = <"section one">
				>
				["at0002"] = <
					text = <"instruction section">
					description = <"section two">
				>
				["at0003"] = <
					text = <"evaluation section">
					description = <"section three">
				>
		        ["at1000"] = <
					text = <"test observation">
					description = <"observation">
				>
		        ["at1001"] = <
		            text = <"test event">
		            description = <"single event">
				>
		        ["at1002"] = <
					text = <"test item">
					description = <"item single">
				>
				["at1003"] = <
					text = <"test dv_text">
					description = <"dv_text">
				>
				["at2000"] = <
					text = <"test instruction">
					description = <"instruction">
				>
				["at2001"] = <
					text = <"state">
					description = <"instruction state">
				>
				["at2001.0"] = <
					text = <"initial">
					description = <"state initial">
				>
				["at2001.1"] = <
					text = <"wait">
					description = <"state wait">
				>
				["at2001.2"] = <
					text = <"completed">
					description = <"state completed">
				>
		        ["at2002"] = <
					text = <"list">
					description = <" * internal structure * ">
				>
				["at2003"] = <
					text = <"cluster">
					description = <" * internal structure * ">
				>
				["at2004"] = <
					text = <"name">
					description = <"drug name">
				>
				["at2005"] = <
					text = <"strength">
					description = <"drug strength">
				>
				["at2006"] = <
					text = <"form">
					description = <"drug form">
				>
				["at2006.0"] = <
					text = <"capsule">
					description = <"capsule form">
				>
				["at2006.1"] = <
					text = <"powder">
					description = <"powder form">
				>
				["at2006.2"] = <
					text = <"tablet">
					description = <"tablet form">
				>
				["at2006.3"] = <
					text = <"solution">
					description = <"solution form">
				>
				["at2006.4"] = <
					text = <"suspension">
					description = <"suspension form">
				>
		        ["at2007"] = <
		            text = <"count">
		            description = <"drug count">
		        >
		        ["at3000"] = <
					text = <"test evaluvation">
					description = <"observation">
				>
		        ["at3001"] = <
					text = <"table">
					description = <"vision table">
				>
		        ["at3002"] = <
					text = <"cluster">
					description = <" * internal structure * ">
				>
				["at3100"] = <
					text = <"aspect">
					description = <" * internal structure * ">
				>
				["at3101"] = <
					text = <"acuity unaided">
					description = <"acuity unaided">
				>
				["at3102"] = <
					text = <"acuity w/glasses">
					description = <"acuity w/glasses">
				>
				["at3103"] = <
					text = <"color">
					description = <"color">
				>
				["at3101.0"] = <
					text = <"acuity unaided">
					description = <"acuity unaided">
				>
				["at3102.0"] = <
					text = <"acuity w/glasses">
					description = <"acuity w/glasses">
				>
				["at3103.0"] = <
					text = <"color">
					description = <"color">
				>
				["at3200"] = <
					text = <"left eye">
					description = <" * internal structure * ">
				>
				["at3201"] = <
					text = <"acuity unaided">
					description = <"acuity unaided">
				>
				["at3202"] = <
					text = <"acuity w/glasses">
					description = <"acuity w/glasses">
				>
				["at3203"] = <
					text = <"color">
					description = <"color">
				>
				["at3203.0"] = <
					text = <"normal">
					description = <"color">
				>
				["at3203.1"] = <
					text = <"weak">
					description = <"color">
				>
				["at3203.2"] = <
					text = <"very weak">
					description = <"color">
				>
				["at3203.3"] = <
					text = <"no color">
					description = <"color">
				>
				["at3300"] = <
					text = <"right eye">
					description = <" * internal structure * ">
				>
				["at3301"] = <
					text = <"acuity unaided">
					description = <"acuity unaided">
				>
				["at3302"] = <
					text = <"acuity w/glasses">
					description = <"acuity w/glasses">
				>
				["at3303"] = <
					text = <"color">
					description = <"color">
				>
				["at3303.0"] = <
					text = <"normal">
					description = <"color">
				>
				["at3303.1"] = <
					text = <"weak">
					description = <"color">
				>
				["at3303.2"] = <
					text = <"very weak">
					description = <"color">
				>
				["at3303.3"] = <
					text = <"no color">
					description = <"color">
				>
			>
		>
	>